# Introduction

Morsels is a complete **client-side** search solution, including a search **user interface and library** that depends on a **pre-built index** generated by a **command-line build tool**.

The secondary value proposition here versus other pre-built index options is the splitting of this index to many smaller chunks ("morsels"), which enables the client to **retrieve and load only what it needs** when searched. The index is also generated in a low-level format with various compression schemes employed, powered by WebAssembly, enabling a much smaller index size.

In all, this avoids blowing up network and memory usage on startup, and increases the scalability of client-side search options tremendously.

## What

The core idea of this tool enabling greater scalability is to split up a monolithic postings list into many smaller files (hence the name *"Morsels"*), organised by the indexed terms. Multiple index files are batched into the same file, keeping to a certain configurable limit as much as possible.

On the client, supporting information (e.g. dictionary, document lengths, field weights) is retrieved on startup, which is usually less than a few MB even for fairly large collections.

Only the index files containing searched terms will be requested on-demand from a static file server.


## Use Cases

In short, you may want to use this tool if:
- You want a **complete, end-to-end** and customisable search UI and **cli-based file indexing** solution (perfect for static site generators!)
- You have a fairly **large collection** of html, csv, or json (only these are supported for now) files that cannot be monolithically retrieved or kept in memory feasibly
- Running a search server / SaaS (eg. Algolia Docsearch) is not an option

> ⚠️ 
> It is **not possible** to use morsels for **client-side indexing** as such since the indexer is a cli tool.
>
> If this is the use case, consider other lighter-weight libraries like lunr.js that already fit well.


## Libraries

This project is currently made up of 1 exposed crate and npm package, which may be referred to in the subsequent sections of the documentation.

#### Exposed Crates and Packages:
- **morsels_indexer**: the cli tool providing indexing functionalities for several file formats
- **@morsels/search-ui**: interfaces with @morsels/search-lib to provide basic search UI functionalities (e.g. result preview generation)

#### Internal Crates and Packages:
- **morsels_search**: internal rust wasm crate, used by the **@morsels/search-lib** package below.
- **morsels_common**: internal rust crate containing some common functionalities
- **@morsels/search-lib**: a small companion library to morsels_search for interfacing with the wasm crate. This may be used without the `@morsels/search-ui` package in the future. For now, it only serves to separate some concerns from the UI package
- **@morsels/lang-XX**: internal tokenizer packages for different languages generated by wasm pack

## Other Limitations

- The project uses WebAssembly. If IE support is needed, you'll have to look elsewhere =(
- For now, the focus is on providing e2e search functionalities in the **browser**. That means no Node.js support and such.
