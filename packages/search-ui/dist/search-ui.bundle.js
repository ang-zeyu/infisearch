!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.initMorsels=t():e.initMorsels=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>Pe});function n(e,t,n){const{fieldStoreBlockSize:o,numStoresPerDir:i,indexingConfig:s}=n,{numDocsPerBlock:r}=s,l=Math.floor(t/o),c=Math.floor(t/r);return`${e}field_store/${Math.floor(l/i)}/${l}--${c}.json`}var o=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function l(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}c((o=o.apply(e,t||[])).next())}))};let i=0;const s=[];function r(){s.length&&s.shift()().then(r)}function l(e){return o(this,void 0,void 0,(function*(){const t=()=>o(this,void 0,void 0,(function*(){i+=1,yield e(),i-=1}));i>=2?s.push(t):(yield t(),r())}))}class c{constructor(e){this.cache=e,this.linkToJsons=Object.create(null)}cacheJson(e){return o(this,void 0,void 0,(function*(){let t;this.cache?(t=yield this.cache.match(e),t||l((()=>o(this,void 0,void 0,(function*(){yield this.cache.add(e),t=yield this.cache.match(e),this.linkToJsons[e]=t.json()}))))):l((()=>o(this,void 0,void 0,(function*(){t=yield fetch(e),this.linkToJsons[e]=t.json()}))))}))}cacheUrl(e){return o(this,void 0,void 0,(function*(){this.cache&&((yield this.cache.match(e))||l((()=>this.cache.add(e))))}))}getJson(e){return this.linkToJsons[e]||(this.linkToJsons[e]=fetch(e).then((e=>e.json()))),this.linkToJsons[e]}}var a=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function l(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}c((o=o.apply(e,t||[])).next())}))};let u;if(document.currentScript)u=document.currentScript.src;else{const e=document.getElementsByTagName("script");u=e.length&&e[e.length-1].src}u=u.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/");function d(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function f(e,t,...n){const o=document.createElement(e);return Object.entries(t).forEach((([e,t])=>{o.setAttribute(e,t)})),n.forEach((e=>{if("string"==typeof e){const t=document.createElement("span");t.textContent=e,o.appendChild(t)}else o.appendChild(e)})),o}const h=f,p="data-morsels-loading-indicator";function m(){return f("div",{[p]:"true"})}function g(e){return e.startsWith("/")?new URL(new URL(window.location.href).origin+e):new URL(e)}function y(e,t){const n=t.map((t=>Array.from(e.matchAll(t))));if(!n.some((e=>e.length)))return{str:e,window:[],numTerms:0};let o=t.map((()=>-1)),i=1e7,s=t.map((()=>0));const r=n.map((()=>0)),l=n.map((e=>!e.length)),c=n.map((()=>-1));for(;;){let e=1e7,t=1e7,a=-1,u=0;for(let o=0;o<r.length;o++){const i=n[o][r[o]];if(!i)continue;const s=i.index+i[1].length;!l[o]&&s<t&&(t=s,a=o),e=Math.min(e,s),u=Math.max(u,s),c[o]=s}if(-1===a)break;const d=u-e;if(d<i&&(i=d,o=[...c],s=r.map(((e,t)=>n[t][e]&&n[t][e][2].length+n[t][e][3].length))),r[a]+=1,r[a]>=n[a].length&&(l[a]=!0,r[a]-=1,l.every((e=>e))))break}const a=o.map(((e,t)=>({pos:e,len:s[t]}))).filter((e=>e.pos>=0)).sort(((e,t)=>e.pos-t.pos)),u=a.length;return{str:e,window:a,numTerms:u}}function v(){return h("span",{class:"morsels-ellipsis","aria-label":"ellipses"}," ... ")}function w(e,t,n){const{highlightRender:o}=n.uiOptions.resultsRenderOpts,{str:i,window:s}=e;if(!s.some((({pos:e})=>e>=0))){if(t){const e=i.trimStart().substring(0,80);return[80===e.length?e.replace(/\w+$/,""):e,v()]}return[i]}const r=[];let l=0;for(const{pos:e,len:c}of s){const s=e+c;if(e>l+80){t&&r.push(v());const l=i.substring(e-40,e);r.push(40===l.length?l.replace(/^\w+/,""):l),r.push(o(h,n,i.substring(e,s)))}else if(e>=l)r.pop(),r.push(i.substring(l,e)),r.push(o(h,n,i.substring(e,s)));else{if(!(s>l))continue;r.pop(),r[r.length-1].textContent+=i.substring(l,s)}const a=i.substring(s,s+40);r.push(40===a.length?a.replace(/\w+$/,""):a),l=s}return t&&r.push(v()),r}function b(e,t,n,o){const{bodyOnlyRender:i,headingBodyRender:s}=o.uiOptions.resultsRenderOpts;let r,l=-2,c="",a=[];for(let n=0;n<e.length;n+=1){const[o,i]=e[n];switch(o){case"headingLink":l=n,c=i;break;case"heading":r=y(i,t),r.pairIdx=n,r.headingLink=l===r.pairIdx-1?c:"",a.push({str:"",window:[],numTerms:-2e3,headingMatch:r,headingLink:r.headingLink,pairIdx:n});break;case"body":{const e=y(i,t);r?(e.headingMatch=r,e.headingLink=r.headingLink,e.numTerms+=r.numTerms):e.numTerms-=1e3,a.push(e);break}}}a.sort(((e,t)=>0===e.numTerms&&0===t.numTerms?t.str.length-e.str.length:t.numTerms-e.numTerms));const u=[],d=Math.min(a.length,2);for(let e=0;e<d&&a[e].numTerms===a[0].numTerms;e+=1)u.push(a[e]);return u.map((e=>{const t=w(e,!0,o);if(e.headingMatch){const i=w(e.headingMatch,!1,o),r=i.length?i:[e.headingMatch.str],l=e.headingLink&&`${n}#${e.headingLink}`;return s(h,o,r,t,l)}return i(h,o,t)}))}var x=function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function l(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}c((o=o.apply(e,t||[])).next())}))};const R=new DOMParser;function T(e,t,n,o,i){const s=[],r=[];for(const e of i.searchedTerms){const t=e.map((e=>(r.push(e),d(e)))).sort(((e,t)=>t.length-e.length)).join("|");if("ascii"===n.langConfig.lang){const e=new RegExp(`(^|\\W|_)(${t})((?=\\W|$))`,"gi");s.push(e)}else if("latin"===n.langConfig.lang){const e=new RegExp(`(^|\\W|_)(${t})(\\w*?)(?=\\W|$)`,"gi");s.push(e)}else if("chinese"===n.langConfig.lang){const e=new RegExp(`()(${t})()`,"gi");s.push(e)}}const l=n.fieldInfos.find((e=>e.do_store&&("body"===e.name||"title"===e.name||"heading"===e.name)));return Promise.all(o.map((e=>function(e,t,n,o,i,s){return x(this,void 0,void 0,(function*(){const{loaderConfigs:r}=n.indexingConfig,l=e.getStorageWithFieldNames();let c,a,u;for(const e of l){const[t,n]=e;switch(t){case"link":c=n;break;case"_relative_fp":a=n;break;case"title":u=n}if(c&&a&&u)break}const{sourceFilesUrl:d,resultsRenderOpts:{addSearchedTerms:f,listItemRender:p}}=t.uiOptions,m=c||"string"==typeof d&&a&&`${d}${a}`||"";u=u||a||c;let y,v=m;if(f&&m){const e=g(m);e.searchParams.append(f,i),v=e.toString()}if(o)y=b(l,s,v,t);else if(m)if(m.endsWith(".html")&&r.HtmlLoader){const e=yield(yield fetch(m)).text(),n=R.parseFromString(e,"text/html"),{title:o,bodies:i}=function(e,t,n,o,i){const s=[];if(t.exclude_selectors)for(const n of t.exclude_selectors){const t=e.querySelectorAll(n);for(let e=0;e<t.length;e+=1)t[e].remove()}t.selectors=t.selectors||[];const r=t.selectors.map((e=>e.selector)).join(",");!function e(n,o){for(const e of t.selectors)if(n.matches(e.selector)){Object.entries(e.attr_map).forEach((([e,t])=>{n.attributes[e]&&s.push([t,n.attributes[e].value])})),o=e.field_name;break}if(n.querySelector(r))for(let t=0;t<n.childNodes.length;t+=1){const i=n.childNodes[t];i.nodeType===Node.ELEMENT_NODE?e(i,o):i.nodeType===Node.TEXT_NODE&&o&&(s.length&&s[s.length-1][0]===o?s[s.length-1][1]+=i.data:s.push([o,i.data]))}else o&&(s.length&&s[s.length-1][0]===o?s[s.length-1][1]+=n.textContent:s.push([o,n.textContent||""]))}(e.documentElement,void 0);const l=s.find((e=>"title"===e[0]));let c="";return l&&([,c]=l),{title:c,bodies:b(s,n,o,i)}}(n,r.HtmlLoader,s,v,t);u=o||u,y=i}else if(m.endsWith(".txt")&&r.TxtLoader)y=b([["body",yield(yield fetch(m)).text()]],s,v,t);else{const e=g(m);if(e.pathname.endsWith(".json")&&r.JsonLoader){const n=yield(yield fetch(m)).json(),{title:o,bodies:i}=function(e,t,n,o,i){const s=[],{field_map:r,field_order:l}=t,c=Object.entries(r).find((([,e])=>"title"===e)),a=c&&c[0];for(const t of l)t!==a&&e[t]&&s.push([r[t],e[t]]);return{title:a&&e[a],bodies:b(s,n,o,i)}}(e.hash?n[e.hash.substring(1)]:n,r.JsonLoader,s,v,t);u=o||u,y=i}}else y=[];return p(h,t,i,m,u,y,l)}))}(e,t,n,l,JSON.stringify(r),s))))}function O(e,t,n,o,i,s,r){return x(this,void 0,void 0,(function*(){if(e.nextAction)return!1;const l=r.uiOptions.loadingIndicatorRender(h,r,!1,!0);o||i.appendChild(l),e.lastElObserver&&e.lastElObserver.disconnect();const c=document.createDocumentFragment();(o?r.uiOptions.termInfoRender(h,r,t.queryParts):[]).forEach((e=>c.appendChild(e)));const a=yield t.getNextN(r.uiOptions.resultsPerPage);if(e.nextAction)return!1;const u=yield r.uiOptions.resultsRender(h,r,n,a,t);if(e.nextAction)return!1;u.length?u.forEach((e=>c.appendChild(e))):o&&c.appendChild(r.uiOptions.noResultsRender(h,r));const d=c.lastElementChild;return o?(i.innerHTML="",s.v=m(),i.append(s.v),i.append(c)):l.replaceWith(c),u.length&&(e.lastElObserver=new IntersectionObserver((([o],l)=>x(this,void 0,void 0,(function*(){o.isIntersecting&&(l.unobserve(d),yield O(e,t,n,!1,i,s,r))}))),{root:i,rootMargin:"150px 0px"}),e.lastElObserver.observe(d)),!0}))}var E;!function(e){e.Auto="auto",e.Dropdown="dropdown",e.Fullscreen="fullscreen",e.Target="target"}(E||(E={}));class k{constructor(){this.isResultsBlank=!0,this.isRunningQuery=!1}}function C(e,t,n){e.setAttribute("role","combobox"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-owns",t.getAttribute("id")),t.setAttribute("role","listbox"),t.setAttribute("aria-label",n),t.setAttribute("aria-live","polite")}function L(e,t){e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls",t),e.setAttribute("aria-activedescendant","morsels-list-selected")}function A(e){return e.split("-")[0]}function P(e){return e.split("-")[1]}function S(e){return["top","bottom"].includes(A(e))?"x":"y"}function D(e){return"y"===e?"height":"width"}function I(e,t,n){let{reference:o,floating:i}=e;const s=o.x+o.width/2-i.width/2,r=o.y+o.height/2-i.height/2,l=S(t),c=D(l),a=o[c]/2-i[c]/2,u="x"===l;let d;switch(A(t)){case"top":d={x:s,y:o.y-i.height};break;case"bottom":d={x:s,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:r};break;case"left":d={x:o.x-i.width,y:r};break;default:d={x:o.x,y:o.y}}switch(P(t)){case"start":d[l]-=a*(n&&u?-1:1);break;case"end":d[l]+=a*(n&&u?-1:1)}return d}function q(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function M(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function W(e,t){var n;void 0===t&&(t={});const{x:o,y:i,platform:s,rects:r,elements:l,strategy:c}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=t,p=q(h),m=l[f?"floating"===d?"reference":"floating":d],g=M(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(l.floating)),boundary:a,rootBoundary:u,strategy:c})),y=M(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===d?{...r.floating,x:o,y:i}:r.reference,offsetParent:await(null==s.getOffsetParent?void 0:s.getOffsetParent(l.floating)),strategy:c}):r[d]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const j=Math.min,$=Math.max;function B(e,t,n){return $(e,j(t,n))}const N=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:o=0}=null!=e?e:{},{x:i,y:s,placement:r,rects:l,platform:c}=t;if(null==n)return{};const a=q(o),u={x:i,y:s},d=S(r),f=D(d),h=await c.getDimensions(n),p="y"===d?"top":"left",m="y"===d?"bottom":"right",g=l.reference[f]+l.reference[d]-u[d]-l.floating[f],y=u[d]-l.reference[d],v=await(null==c.getOffsetParent?void 0:c.getOffsetParent(n));let w=v?"y"===d?v.clientHeight||0:v.clientWidth||0:0;0===w&&(w=l.floating[f]);const b=g/2-y/2,x=a[p],R=w-h[f]-a[m],T=w/2-h[f]/2+b,O=B(x,T,R);return{data:{[d]:O,centerOffset:T-O}}}}),H={left:"right",right:"left",bottom:"top",top:"bottom"};function _(e){return e.replace(/left|right|bottom|top/g,(e=>H[e]))}function F(e,t,n){void 0===n&&(n=!1);const o=P(e),i=S(e),s=D(i);let r="x"===i?o===(n?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[s]>t.floating[s]&&(r=_(r)),{main:r,cross:_(r)}}const Q={start:"end",end:"start"};function U(e){return e.replace(/start|end/g,(e=>Q[e]))}const J=(["top","right","bottom","left"].reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]),function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:o,middlewareData:i,rects:s,initialPlacement:r,platform:l,elements:c}=t,{mainAxis:a=!0,crossAxis:u=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",flipAlignment:h=!0,...p}=e,m=A(o),g=d||(m!==r&&h?function(e){const t=_(e);return[U(e),t,U(t)]}(r):[_(r)]),y=[r,...g],v=await W(t,p),w=[];let b=(null==(n=i.flip)?void 0:n.overflows)||[];if(a&&w.push(v[m]),u){const{main:e,cross:t}=F(o,s,await(null==l.isRTL?void 0:l.isRTL(c.floating)));w.push(v[e],v[t])}if(b=[...b,{placement:o,overflows:w}],!w.every((e=>e<=0))){var x,R;const e=(null!=(x=null==(R=i.flip)?void 0:R.index)?x:0)+1,t=y[e];if(t)return{data:{index:e,overflows:b},reset:{placement:t}};let n="bottom";switch(f){case"bestFit":{var T;const e=null==(T=b.map((e=>[e,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:T[0].placement;e&&(n=e);break}case"initialPlacement":n=r}if(o!==n)return{reset:{placement:n}}}return{}}}}),V=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:s}=t,{apply:r,...l}=e,c=await W(t,l),a=A(n),u=P(n);let d,f;"top"===a||"bottom"===a?(d=a,f=u===(await(null==i.isRTL?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(f=a,d="end"===u?"top":"bottom");const h=$(c.left,0),p=$(c.right,0),m=$(c.top,0),g=$(c.bottom,0),y={availableHeight:o.floating.height-(["left","right"].includes(n)?2*(0!==m||0!==g?m+g:$(c.top,c.bottom)):c[d]),availableWidth:o.floating.width-(["top","bottom"].includes(n)?2*(0!==h||0!==p?h+p:$(c.left,c.right)):c[f])},v=await i.getDimensions(s.floating);null==r||r({...t,...y});const w=await i.getDimensions(s.floating);return v.width!==w.width||v.height!==w.height?{reset:{rects:!0}}:{}}}};function z(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function X(e){if(null==e)return window;if(!z(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function Y(e){return X(e).getComputedStyle(e)}function G(e){return z(e)?"":e?(e.nodeName||"").toLowerCase():""}function K(){const e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map((e=>e.brand+"/"+e.version)).join(" "):navigator.userAgent}function Z(e){return e instanceof X(e).HTMLElement}function ee(e){return e instanceof X(e).Element}function te(e){return"undefined"!=typeof ShadowRoot&&(e instanceof X(e).ShadowRoot||e instanceof ShadowRoot)}function ne(e){const{overflow:t,overflowX:n,overflowY:o}=Y(e);return/auto|scroll|overlay|hidden/.test(t+o+n)}function oe(e){return["table","td","th"].includes(G(e))}function ie(e){const t=/firefox/i.test(K()),n=Y(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function se(){return!/^((?!chrome|android).)*safari/i.test(K())}const re=Math.min,le=Math.max,ce=Math.round;function ae(e,t,n){var o,i,s,r;void 0===t&&(t=!1),void 0===n&&(n=!1);const l=e.getBoundingClientRect();let c=1,a=1;t&&Z(e)&&(c=e.offsetWidth>0&&ce(l.width)/e.offsetWidth||1,a=e.offsetHeight>0&&ce(l.height)/e.offsetHeight||1);const u=ee(e)?X(e):window,d=!se()&&n,f=(l.left+(d&&null!=(o=null==(i=u.visualViewport)?void 0:i.offsetLeft)?o:0))/c,h=(l.top+(d&&null!=(s=null==(r=u.visualViewport)?void 0:r.offsetTop)?s:0))/a,p=l.width/c,m=l.height/a;return{width:p,height:m,top:h,right:f+p,bottom:h+m,left:f,x:f,y:h}}function ue(e){return(t=e,(t instanceof X(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function de(e){return ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function fe(e){return ae(ue(e)).left+de(e).scrollLeft}function he(e,t,n){const o=Z(t),i=ue(t),s=ae(e,o&&function(e){const t=ae(e);return ce(t.width)!==e.offsetWidth||ce(t.height)!==e.offsetHeight}(t),"fixed"===n);let r={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==G(t)||ne(i))&&(r=de(t)),Z(t)){const e=ae(t,!0);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=fe(i));return{x:s.left+r.scrollLeft-l.x,y:s.top+r.scrollTop-l.y,width:s.width,height:s.height}}function pe(e){return"html"===G(e)?e:e.assignedSlot||e.parentNode||(te(e)?e.host:null)||ue(e)}function me(e){return Z(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function ge(e){const t=X(e);let n=me(e);for(;n&&oe(n)&&"static"===getComputedStyle(n).position;)n=me(n);return n&&("html"===G(n)||"body"===G(n)&&"static"===getComputedStyle(n).position&&!ie(n))?t:n||function(e){let t=pe(e);for(te(t)&&(t=t.host);Z(t)&&!["html","body"].includes(G(t));){if(ie(t))return t;t=t.parentNode}return null}(e)||t}function ye(e){if(Z(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=ae(e);return{width:t.width,height:t.height}}function ve(e){const t=pe(e);return["html","body","#document"].includes(G(t))?e.ownerDocument.body:Z(t)&&ne(t)?t:ve(t)}function we(e,t){var n;void 0===t&&(t=[]);const o=ve(e),i=o===(null==(n=e.ownerDocument)?void 0:n.body),s=X(o),r=i?[s].concat(s.visualViewport||[],ne(o)?o:[]):o,l=t.concat(r);return i?l:l.concat(we(r))}function be(e,t,n){return"viewport"===t?M(function(e,t){const n=X(e),o=ue(e),i=n.visualViewport;let s=o.clientWidth,r=o.clientHeight,l=0,c=0;if(i){s=i.width,r=i.height;const e=se();(e||!e&&"fixed"===t)&&(l=i.offsetLeft,c=i.offsetTop)}return{width:s,height:r,x:l,y:c}}(e,n)):ee(t)?function(e,t){const n=ae(e,!1,"fixed"===t),o=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:o,left:i,x:i,y:o,right:i+e.clientWidth,bottom:o+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):M(function(e){var t;const n=ue(e),o=de(e),i=null==(t=e.ownerDocument)?void 0:t.body,s=le(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),r=le(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0);let l=-o.scrollLeft+fe(e);const c=-o.scrollTop;return"rtl"===Y(i||n).direction&&(l+=le(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:r,x:l,y:c}}(ue(e)))}function xe(e){const t=we(e),n=["absolute","fixed"].includes(Y(e).position)&&Z(e)?ge(e):e;return ee(n)?t.filter((e=>ee(e)&&function(e,t){const n=null==t||null==t.getRootNode?void 0:t.getRootNode();if(null!=e&&e.contains(t))return!0;if(n&&te(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(e,n)&&"body"!==G(e))):[]}const Re={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const s=[..."clippingAncestors"===n?xe(t):[].concat(n),o],r=s[0],l=s.reduce(((e,n)=>{const o=be(t,n,i);return e.top=le(o.top,e.top),e.right=re(o.right,e.right),e.bottom=re(o.bottom,e.bottom),e.left=le(o.left,e.left),e}),be(t,r,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:o}=e;const i=Z(n),s=ue(n);if(n===s)return t;let r={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if((i||!i&&"fixed"!==o)&&(("body"!==G(n)||ne(s))&&(r=de(n)),Z(n))){const e=ae(n,!0);l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{...t,x:t.x-r.scrollLeft+l.x,y:t.y-r.scrollTop+l.y}},isElement:ee,getDimensions:ye,getOffsetParent:ge,getDocumentElement:ue,getElementRects:e=>{let{reference:t,floating:n,strategy:o}=e;return{reference:he(t,ge(n),o),floating:{...ye(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===Y(e).direction};let Te,Oe,Ee=!1,ke=!1,Ce=!1;function Le(e){return e.mode===E.Auto&&!Ee||e.mode===E.Dropdown}function Ae(e,t,n,o){const{uiOptions:i}=o;let s={v:m()};const r=new k;function l(l){var c,a,u,d,f;return a=this,u=void 0,f=function*(){const a=i.loadingIndicatorRender(h,o,!1,r.isResultsBlank);s.v.replaceWith(a),s.v=a;try{null===(c=r.currQuery)||void 0===c||c.free(),r.currQuery=yield n.getQuery(l),(yield O(r,r.currQuery,n.config,!0,t,s,o))&&(r.isResultsBlank=!1),e.scrollTo({top:0}),t.scrollTo({top:0})}catch(e){throw console.error(e),t.innerHTML="",t.appendChild(i.errorRender(h,o)),e}finally{if(r.nextAction){const e=r.nextAction;r.nextAction=void 0,yield e()}else r.isRunningQuery=!1}},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{i(f.next(e))}catch(e){t(e)}}function o(e){try{i(f.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof d?i:new d((function(e){e(i)}))).then(n,o)}i((f=f.apply(a,u||[])).next())}))}n.setupPromise.then((()=>{r.nextAction&&(r.nextAction(),r.nextAction=void 0)}));let c=-1;return e=>{const a=i.preprocessQuery(e.target.value);if(clearTimeout(c),a.length)c=setTimeout((()=>{var e;r.isResultsBlank&&!(null===(e=t.firstElementChild)||void 0===e?void 0:e.getAttribute(p))&&(t.innerHTML="",s.v=i.loadingIndicatorRender(h,o,!n.isSetupDone,!0),t.appendChild(s.v),Le(i)&&Te()),r.isRunningQuery||!n.isSetupDone?r.nextAction=()=>l(a):(r.isRunningQuery=!0,l(a))}),i.inputDebounce);else{const e=()=>{t.innerHTML="",i.mode!==E.Target&&(Le(i)?Oe():t.appendChild(i.fsBlankRender(h,o))),r.isRunningQuery=!1,r.isResultsBlank=!0};r.isRunningQuery?r.nextAction=e:e()}}}const Pe=function(e){const t=e.isMobileDevice||(()=>window.matchMedia("only screen and (max-width: 1024px)").matches);Ee=t(),function(e,t){if(e.searcherOptions=e.searcherOptions||{},!("url"in e.searcherOptions))throw new Error("Mandatory url parameter not specified");e.searcherOptions.url.endsWith("/")||(e.searcherOptions.url+="/"),e.searcherOptions.url.startsWith("/")&&(e.searcherOptions.url=window.location.origin+e.searcherOptions.url),"numberOfExpandedTerms"in e.searcherOptions||(e.searcherOptions.numberOfExpandedTerms=3),"useQueryTermProximity"in e.searcherOptions||(e.searcherOptions.useQueryTermProximity=!t),"resultLimit"in e.searcherOptions||(e.searcherOptions.resultLimit=null),e.uiOptions=e.uiOptions||{};const{uiOptions:n}=e;if(n.sourceFilesUrl&&!n.sourceFilesUrl.endsWith("/")&&(n.sourceFilesUrl+="/"),n.mode=n.mode||E.Auto,n.mode===E.Target&&("string"==typeof n.target&&(n.target=document.getElementById(n.target)),!n.target))throw new Error("'target' mode specified but no valid target option specified");if("input"in n&&"string"!=typeof n.input||(n.input=document.getElementById(n.input||"morsels-search")),[E.Dropdown,E.Target].includes(n.mode)&&!n.input)throw new Error("'dropdown' or 'target' mode specified but no input element found");"inputDebounce"in n||(n.inputDebounce=100),n.preprocessQuery=n.preprocessQuery||(e=>e),n.dropdownAlignment=n.dropdownAlignment||"bottom-end","string"==typeof n.fsContainer&&(n.fsContainer=document.getElementById(n.fsContainer)),n.fsContainer=n.fsContainer||document.getElementsByTagName("body")[0],n.resultsPerPage=n.resultsPerPage||8,n.label=n.label||"Search this site",n.fsPlaceholder=n.fsPlaceholder||"Search this site...",n.fsCloseText=n.fsCloseText||"Close",n.errorRender=n.errorRender||(e=>e("div",{class:"morsels-error"},"Oops! Something went wrong... 🙁")),n.noResultsRender=n.noResultsRender||(e=>e("div",{class:"morsels-no-results"},"No results found")),n.fsBlankRender=n.fsBlankRender||(e=>e("div",{class:"morsels-fs-blank"},"Start Searching Above!")),n.loadingIndicatorRender||(n.loadingIndicatorRender=(e,t,n,o)=>{const i=e("span",{class:"morsels-loading-indicator"});if(n){const t=e("div",{class:"morsels-initialising-text"},"... Initialising ...");return e("div",{class:"morsels-initialising"},t,i)}return o||i.classList.add("morsels-loading-indicator-subsequent"),i});const o=n.loadingIndicatorRender;n.loadingIndicatorRender=(...e)=>{const t=o(...e);return t.setAttribute(p,"true"),t},n.termInfoRender=n.termInfoRender||(()=>[]),n.resultsRender=n.resultsRender||T,n.resultsRenderOpts=n.resultsRenderOpts||{};const{resultsRenderOpts:i}=n;i.listItemRender=i.listItemRender||((e,t,n,o,s,r)=>{const l=e("a",{class:"morsels-link"},e("div",{class:"morsels-title"},s),...r);if(o){let e=o;const{addSearchedTerms:t}=i;if(t){const i=g(o);i.searchParams.append(t,n),e=i.toString()}l.setAttribute("href",e)}return e("li",{class:"morsels-list-item",role:"option"},l)}),i.headingBodyRender=i.headingBodyRender||((e,t,n,o,i)=>{const s=e("a",{class:"morsels-heading-body"},e("div",{class:"morsels-heading"},...n),e("div",{class:"morsels-bodies"},e("div",{class:"morsels-body"},...o)));return i&&s.setAttribute("href",i),s}),i.bodyOnlyRender=i.bodyOnlyRender||((e,t,n)=>e("div",{class:"morsels-body"},...n)),i.highlightRender=i.highlightRender||((e,t,n)=>e("span",{class:"morsels-highlight"},n)),e.otherOptions=e.otherOptions||{}}(e,Ee);const{uiOptions:o}=e,i=new class{constructor(e){this.options=e,this.isSetupDone=!1,this.queries=Object.create(null),this.nextId=0,this.setupPromise=this.retrieveConfig().then((()=>a(this,void 0,void 0,(function*(){return new Promise((t=>a(this,void 0,void 0,(function*(){const n=`const __morsWrkrUrl="${new URL(u+`search-worker-${this.config.langConfig.lang}.bundle.js`,document.baseURI||self.location.href)+""}";importScripts(__morsWrkrUrl);`,o=URL.createObjectURL(new Blob([n],{type:"text/javascript"}));this.worker=new Worker(o),yield this.setupCache(`morsels:${e.url}`),this.worker.onmessage=e=>{if(e.data.query){const{query:t,queryId:n,nextResults:o,searchedTerms:i,queryParts:s}=e.data;this.queries[t][n].resolve({query:t,nextResults:o,searchedTerms:i,queryParts:s})}else""===e.data?(this.worker.postMessage(this.config),URL.revokeObjectURL(o)):e.data.isSetupDone&&t()},this.worker.onmessageerror=e=>{console.log(e)}}))))})))).then((()=>{this.setupFieldStoreCache(),this.setupIndexCache()})).then((()=>this.isSetupDone=!0))}setupCache(e){return a(this,void 0,void 0,(function*(){try{let t=yield caches.open(e);const n=yield t.match("/index_ver");if(n){const o=yield n.text();this.config.indexVer!==o&&(yield caches.delete(e),t=yield caches.open(e))}yield t.put("/index_ver",new Response(this.config.indexVer)),this.cache=new c(t)}catch(e){this.cache=new c(void 0)}}))}setupFieldStoreCache(){if(!this.options.cacheAllFieldStores)return;const{fieldStoreBlockSize:e,indexingConfig:t}=this.config,o=Math.min(e,t.numDocsPerBlock);for(let e=0;e<this.config.lastDocId;e+=o)this.cache.cacheJson(n(this.options.url,e,this.config))}setupIndexCache(){this.config.indexingConfig.plNamesToCache.forEach((e=>{const t=Math.floor(e/this.config.indexingConfig.numPlsPerDir),n=`${this.options.url}pl_${t}/pl_${e}.json`;this.cache.cacheUrl(n)}))}retrieveConfig(){return a(this,void 0,void 0,(function*(){if(this.config=yield(yield fetch(`${this.options.url}morsels_config.json`)).json(),"0.1.0"!==this.config.ver)throw new Error("Morsels search !== indexer version!");"cacheAllFieldStores"in this.options||(this.options.cacheAllFieldStores=!!this.config.cacheAllFieldStores),this.options.useQueryTermProximity=this.options.useQueryTermProximity&&this.config.indexingConfig.withPositions,this.config.searcherOptions=this.options}))}deleteQuery(e,t){delete this.queries[e][t],0===Object.keys(this.queries[e]).length&&delete this.queries[e]}getQuery(e){return a(this,void 0,void 0,(function*(){yield this.setupPromise;const t=this.nextId;this.nextId+=1,this.queries[e]=this.queries[e]||{},this.queries[e][t]={promise:void 0,resolve:void 0},this.queries[e][t].promise=new Promise((n=>{this.queries[e][t].resolve=n,this.worker.postMessage({query:e,queryId:t})}));const o=yield this.queries[e][t].promise;return new class{constructor(e,t,n,o,i){this.query=e,this.searchedTerms=t,this.queryParts=n,this.getNextN=o,this.free=i}}(e,o.searchedTerms,o.queryParts,(o=>a(this,void 0,void 0,(function*(){if(!this.queries[e]||!this.queries[e][t])return[];if(yield this.queries[e][t].promise,this.queries[e][t].promise=new Promise((n=>{this.queries[e][t].resolve=n,this.worker.postMessage({query:e,queryId:t,isGetNextN:!0,n:o})})),!this.queries[e]||!this.queries[e][t])return[];const i=(yield this.queries[e][t].promise).nextResults.map((([e,t])=>new class{constructor(e,t,n){this.docId=e,this.score=t,this.fieldInfos=n,this.storage=Object.create(null)}populate(e,t,o){return i=this,s=void 0,l=function*(){const i=n(e,this.docId,o);try{const e=yield t.getJson(i);let n=this.docId%o.fieldStoreBlockSize;const{numDocsPerBlock:s}=o.indexingConfig;s<o.fieldStoreBlockSize&&(n%=s),this.storage=e[n]}catch(e){console.log(e)}},new((r=void 0)||(r=Promise))((function(e,t){function n(e){try{c(l.next(e))}catch(e){t(e)}}function o(e){try{c(l.throw(e))}catch(e){t(e)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(n,o)}c((l=l.apply(i,s||[])).next())}));var i,s,r,l}getSingleField(e){const t=this.fieldInfos.find((t=>t.name===e)),n=this.storage.find((([e])=>e===t.id));return n?n[1]:""}getStorageWithFieldNames(){return this.storage.map((([e,t])=>[this.fieldInfos[e].name,t]))}}(e,t,this.config.fieldInfos)));return yield Promise.all(i.map((e=>e.populate(this.options.url,this.cache,this.config)))),i}))),(()=>{this.deleteQuery(e,t),this.worker.postMessage({query:e,isFree:!0})}))}))}}(e.searcherOptions);let s;const{root:r,listContainer:l,input:d}=function(e,t){const n=h("input",{class:"morsels-fs-input",type:"search",placeholder:e.uiOptions.fsPlaceholder,autocomplete:"false","aria-labelledby":"morsels-fs-label"});L(n,"morsels-fs-list");const o=h("button",{class:"morsels-input-close-fs"},e.uiOptions.fsCloseText);o.onclick=e=>{e.preventDefault(),t()};const i=h("ul",{id:"morsels-fs-list",class:"morsels-list","aria-labelledby":"morsels-fs-label"}),s=h("div",{class:"morsels-root morsels-fs-root"},h("form",{class:"morsels-fs-input-button-wrapper"},h("label",{id:"morsels-fs-label",for:"morsels-fs-input",style:"display: none"},e.uiOptions.label),n,o),i);s.onclick=e=>e.stopPropagation(),s.onmousedown=e=>e.stopPropagation(),C(s,i,e.uiOptions.label);const r=h("div",{class:"morsels-fs-backdrop"},s);return r.onmousedown=t,r.onkeyup=e=>{"Escape"===e.code&&(e.stopPropagation(),t())},{root:r,listContainer:i,input:n}}(e,(()=>s()));d.addEventListener("input",Ae(r,l,i,e)),l.appendChild(o.fsBlankRender(h,e));const f=()=>{!function(e,t,n){n.appendChild(e);const o=e.querySelector("input.morsels-fs-input");o&&o.focus();const i=t.querySelector(".focus");i&&t.scrollTo({top:i.offsetTop-t.offsetTop-30})}(r,l,o.fsContainer),Ce=!0};let m;s=()=>{r.remove(),Ce=!1};const{input:y,dropdownAlignment:v}=o;if(!y||o.mode!==E.Auto&&o.mode!==E.Dropdown){if(y&&o.mode===E.Fullscreen)y.addEventListener("focus",(()=>{f()}));else if(y&&o.mode===E.Target){y.addEventListener("input",Ae(o.target,o.target,i,e));let t=o.target.getAttribute("id");t||(o.target.setAttribute("id","morsels-target-list"),t="morsels-target-list"),L(y,t),C(y,o.target,o.label)}}else{const n=y.parentElement;y.remove();const{dropdownRoot:r,dropdownListContainer:l}=function(e,t){const n=h("ul",{id:"morsels-dropdown-list",class:"morsels-list"}),o=h("div",{class:"morsels-root"},t,h("div",{class:"morsels-inner-root",style:"display: none;"},h("div",{class:"morsels-input-dropdown-separator"}),n));return L(t,"morsels-dropdown-list"),C(o,n,e.uiOptions.label),{dropdownRoot:o,dropdownListContainer:n}}(e,y);function c(){Oe(),document.activeElement===y&&Te()}let a;m=l,n.appendChild(r),Te=()=>{!function(e,t,n){if(t.childElementCount){const o=e.lastElementChild,i=o.firstElementChild;o.style.display="block",((e,t,n)=>(async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:s=[],platform:r}=n,l=await(null==r.isRTL?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:a,y:u}=I(c,o,l),d=o,f={};for(let n=0;n<s.length;n++){const{name:h,fn:p}=s[n],{x:m,y:g,data:y,reset:v}=await p({x:a,y:u,initialPlacement:o,placement:d,strategy:i,middlewareData:f,rects:c,platform:r,elements:{reference:e,floating:t}});a=null!=m?m:a,u=null!=g?g:u,f={...f,[h]:{...f[h],...y}},v&&("object"==typeof v&&(v.placement&&(d=v.placement),v.rects&&(c=!0===v.rects?await r.getElementRects({reference:e,floating:t,strategy:i}):v.rects),({x:a,y:u}=I(c,d,l))),n=-1)}return{x:a,y:u,placement:d,strategy:i,middlewareData:f}})(e,t,{platform:Re,...n}))(e,o,{placement:n,middleware:[J({padding:10,mainAxis:!1}),V({apply({availableWidth:e,availableHeight:n}){Object.assign(t.style,{maxWidth:`min(${e}px, var(--morsels-dropdown-max-width))`,maxHeight:`min(${n}px, var(--morsels-dropdown-max-height))`})},padding:10}),N({element:i})]}).then((({x:e,y:t,middlewareData:n})=>{Object.assign(o.style,{left:`${e}px`,top:`${t}px`});const{x:s}=n.arrow;Object.assign(i.style,{left:null!=s?`${s}px`:""})}))}}(r,m,v),ke=!0},Oe=()=>{r.lastElementChild.style.display="none",ke=!1},y.addEventListener("input",Ae(r,m,i,e)),window.addEventListener("resize",(()=>{clearTimeout(a),a=setTimeout((()=>{o.mode!==E.Dropdown?(Ee=t(),Ee?Oe():(s(),c())):c()}),10)})),y.addEventListener("blur",(()=>{Le(o)&&setTimeout((()=>{let e=document.activeElement;for(;e;)if(e=e.parentElement,e===r)return void y.focus();Oe()}),100)})),y.addEventListener("focus",(()=>{Le(o)?Te():f()}))}function w(e){if(!["ArrowDown","ArrowUp","Home","End","Enter"].includes(e.key))return;let t,n=e=>{const n=e.offsetTop-t.offsetTop-t.clientHeight/2+e.clientHeight/2;t.scrollTo({top:n})};if(Le(o)){if(!ke)return;t=m}else if(o.mode===E.Target)t=o.target,n=e=>{e.scrollIntoView({block:"center"})};else{if(!Ce)return;t=l}const i=t.querySelector(".focus");function s(e){i&&(i.classList.remove("focus"),i.removeAttribute("aria-selected"),i.removeAttribute("id")),e.classList.add("focus"),e.setAttribute("aria-selected","true"),e.setAttribute("id","morsels-list-selected"),n(e)}function r(e,t){e&&!e.getAttribute(p)?s(e):t&&!t.getAttribute(p)&&s(t)}const c=t.firstElementChild,a=t.lastElementChild;if("ArrowDown"===e.key)i?r(i.nextElementSibling,null):r(c,null==c?void 0:c.nextElementSibling);else if("ArrowUp"===e.key)i&&r(i.previousElementSibling,null);else if("Home"===e.key)r(c,null==c?void 0:c.nextElementSibling);else if("End"===e.key)r(a,null==a?void 0:a.previousElementSibling);else if("Enter"===e.key&&i){const e=i.querySelector("a[href]");e&&(window.location.href=e.getAttribute("href"))}e.preventDefault()}return null==y||y.addEventListener("keydown",w),d.addEventListener("keydown",w),{showFullscreen:f,hideFullscreen:s}};return t.default})()}));